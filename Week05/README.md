学习笔记

功能模块 --> 架构设计 --> 存储设计 --> 可用性设计

解决了什么痛点（动机、初衷）？

“好的架构可以在一张信封上画出来”

移动端瀑布流分页，使用游标

设计数据库表时，遇到大字段考虑独立出来，优化查询

可用性设计：归并回源，[singleflight](https://pkg.go.dev/golang.org/x/sync/singleflight) ，存在缓存穿透时，希望交给一个人访问数据库

```txt
+------+  +------+  +------+
|      |  |      |  |      |
+--+---+  +--+---+  +---+--+
   |         |          |
   |         v          |
   |      +--+----+     |
   +----->+       +<----+
          +---+---+
              |
              v
        +-----+-------+
        |             |
        +-------------+
```

可用性设计：缓存论文 scaling memcache at Facebook

可用性设计：热点 --> local cache: 1. service mesh proxy, 2. sdk

